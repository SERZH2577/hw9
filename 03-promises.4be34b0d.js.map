{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAGMC,GADUC,SAASC,cAAc,SACjBD,SAASC,cAAc,mBACvCC,EAAeF,SAASC,cAAc,iBACtCE,EAAiBH,SAASC,cAAc,mBACxCG,EAASJ,SAASC,cAAc,gBAEtCG,EAAOC,iBAAiB,SAMxB,SAAeC,GACbA,EAAEC,iBAGwB,KAAxBR,EAAcS,OACS,KAAvBN,EAAaM,OACY,KAAzBL,EAAeK,QAEfJ,EAAOK,aAAa,WAAY,IAEhCC,YAAW,WAETC,EADAC,GAAmB,EACYb,EAAcS,OAE7CK,EAAaC,aAAY,WAEvBH,EADAC,GAAmB,EACYV,EAAaM,OAExCI,GAAmBG,OAAOZ,EAAeK,SAC3CQ,cAAcH,GACdD,EAAkB,EAClBK,EAAM,EACNb,EAAOc,gBAAgB,Y,GAExBhB,EAAaM,M,GACfT,EAAcS,O,IA7BrB,IAAIS,EAAMF,OAAOhB,EAAcS,OAC3BI,EAAkB,EAClBC,EAAa,KA+BjB,SAASF,EAAcQ,EAAUC,GAC/B,IAAMC,EAAgBC,KAAKC,SAAW,GAEtC,IAAIC,SAAQ,SAACC,EAASC,GACpB,OAAIL,EACKI,EACLE,EAAA9B,GAAS+B,OAAOC,QACd,uBAAuCC,OAAhBX,EAAS,QAA6BW,OAAtBb,GAAOF,OAAOK,GAAQ,QAK5DM,EACLC,EAAA9B,GAAS+B,OAAOG,QACd,sBAAsCD,OAAhBX,EAAS,QAA6BW,OAAtBb,GAAOF,OAAOK,GAAQ,O,IAI/DY,MAAK,SAAAC,G,OAAUA,C,IACfC,OAAM,SAAAC,G,OAASA,C","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formRef = document.querySelector('.form');\nconst inputDelayRef = document.querySelector('[name=\"delay\"]');\nconst inputStepRef = document.querySelector('[name=\"step\"]');\nconst inputAmountRef = document.querySelector('[name=\"amount\"]');\nconst btnRef = document.querySelector('.btn-promise');\n\nbtnRef.addEventListener('click', onFoo);\n\nlet sum = Number(inputDelayRef.value);\nlet numberOfActions = 0;\nlet intervalId = null;\n\nfunction onFoo(e) {\n  e.preventDefault();\n\n  if (\n    inputDelayRef.value !== '' &&\n    inputStepRef.value !== '' &&\n    inputAmountRef.value !== ''\n  ) {\n    btnRef.setAttribute('disabled', '');\n\n    setTimeout(() => {\n      numberOfActions += 1;\n      createPromise(numberOfActions, inputDelayRef.value);\n\n      intervalId = setInterval(() => {\n        numberOfActions += 1;\n        createPromise(numberOfActions, inputStepRef.value);\n\n        if (numberOfActions >= Number(inputAmountRef.value)) {\n          clearInterval(intervalId);\n          numberOfActions = 0;\n          sum = 0;\n          btnRef.removeAttribute('disabled');\n        }\n      }, inputStepRef.value);\n    }, inputDelayRef.value);\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.5;\n\n  new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      return resolve(\n        Notiflix.Notify.success(\n          `✅ Fulfilled promise ${position} in ${(sum += Number(delay))}ms`\n        )\n      );\n    }\n\n    return reject(\n      Notiflix.Notify.failure(\n        `❌ Rejected promise ${position} in ${(sum += Number(delay))}ms`\n      )\n    );\n  })\n    .then(result => result)\n    .catch(error => error);\n}\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$inputDelayRef","document","querySelector","$ce04d3a99e08e73b$var$inputStepRef","$ce04d3a99e08e73b$var$inputAmountRef","$ce04d3a99e08e73b$var$btnRef","addEventListener","e","preventDefault","value","setAttribute","setTimeout","$ce04d3a99e08e73b$var$createPromise","$ce04d3a99e08e73b$var$numberOfActions","$ce04d3a99e08e73b$var$intervalId","setInterval","Number","clearInterval","$ce04d3a99e08e73b$var$sum","removeAttribute","position","delay","shouldResolve","Math","random","Promise","resolve","reject","$parcel$interopDefault","Notify","success","concat","failure","then","result","catch","error"],"version":3,"file":"03-promises.4be34b0d.js.map"}
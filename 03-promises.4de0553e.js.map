{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEgBC,SAASC,cAAc,SAAvC,MACMC,EAAgBF,SAASC,cAAc,kBACvCE,EAAeH,SAASC,cAAc,iBACtCG,EAAiBJ,SAASC,cAAc,mBACxCI,EAASL,SAASC,cAAc,gBAEtCI,EAAOC,iBAAiB,SAMxB,SAAeC,GACbA,EAAEC,iBAGwB,KAAxBN,EAAcO,OACS,KAAvBN,EAAaM,OACY,KAAzBL,EAAeK,QAEfJ,EAAOK,aAAa,WAAY,IAEhCC,YAAW,KACTC,GAAmB,EACnBC,EAAcD,EAAiBV,EAAcO,OAE7CK,EAAaC,aAAY,KACvBH,GAAmB,EACnBC,EAAcD,EAAiBT,EAAaM,OAExCG,GAAmBI,OAAOZ,EAAeK,SAC3CQ,cAAcH,GACdF,EAAkB,EAClBM,EAAM,EACNb,EAAOc,gBAAgB,Y,GAExBhB,EAAaM,MAAM,GACrBP,EAAcO,O,IA7BrB,IAAIS,EAAMF,OAAOd,EAAcO,OAC3BG,EAAkB,EAClBE,EAAa,KA+BjB,SAASD,EAAcO,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GAEtC,IAAIC,SAAQ,CAACC,EAASC,IAChBL,EACKI,EACLE,EAAA9B,GAAS+B,OAAOC,QACd,uBAAuBV,QAAgBF,GAAOF,OAAOK,SAKpDM,EACLC,EAAA9B,GAAS+B,OAAOE,QACd,sBAAsBX,QAAgBF,GAAOF,OAAOK,WAIvDW,MAAKC,GAAUA,IACfC,OAAMC,GAASA,G","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formRef = document.querySelector('.form');\nconst inputDelayRef = document.querySelector('[name=\"delay\"]');\nconst inputStepRef = document.querySelector('[name=\"step\"]');\nconst inputAmountRef = document.querySelector('[name=\"amount\"]');\nconst btnRef = document.querySelector('.btn-promise');\n\nbtnRef.addEventListener('click', onFoo);\n\nlet sum = Number(inputDelayRef.value);\nlet numberOfActions = 0;\nlet intervalId = null;\n\nfunction onFoo(e) {\n  e.preventDefault();\n\n  if (\n    inputDelayRef.value !== '' &&\n    inputStepRef.value !== '' &&\n    inputAmountRef.value !== ''\n  ) {\n    btnRef.setAttribute('disabled', '');\n\n    setTimeout(() => {\n      numberOfActions += 1;\n      createPromise(numberOfActions, inputDelayRef.value);\n\n      intervalId = setInterval(() => {\n        numberOfActions += 1;\n        createPromise(numberOfActions, inputStepRef.value);\n\n        if (numberOfActions >= Number(inputAmountRef.value)) {\n          clearInterval(intervalId);\n          numberOfActions = 0;\n          sum = 0;\n          btnRef.removeAttribute('disabled');\n        }\n      }, inputStepRef.value);\n    }, inputDelayRef.value);\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.5;\n\n  new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      return resolve(\n        Notiflix.Notify.success(\n          `✅ Fulfilled promise ${position} in ${(sum += Number(delay))}ms`\n        )\n      );\n    }\n\n    return reject(\n      Notiflix.Notify.failure(\n        `❌ Rejected promise ${position} in ${(sum += Number(delay))}ms`\n      )\n    );\n  })\n    .then(result => result)\n    .catch(error => error);\n}\n"],"names":["$eWCmQ","parcelRequire","document","querySelector","$47d4ff9957288465$var$inputDelayRef","$47d4ff9957288465$var$inputStepRef","$47d4ff9957288465$var$inputAmountRef","$47d4ff9957288465$var$btnRef","addEventListener","e","preventDefault","value","setAttribute","setTimeout","$47d4ff9957288465$var$numberOfActions","$47d4ff9957288465$var$createPromise","$47d4ff9957288465$var$intervalId","setInterval","Number","clearInterval","$47d4ff9957288465$var$sum","removeAttribute","position","delay","shouldResolve","Math","random","Promise","resolve","reject","$parcel$interopDefault","Notify","success","failure","then","result","catch","error"],"version":3,"file":"03-promises.4de0553e.js.map"}